void run_case(Case case)
{
    err_print("%-60s ".(case.title()));

    String msg;
    var c = call_and_catch<Fail>([]{
        public void call()
        {
            msg = case.run();
            if (msg === nil)
            {
                msg = "";
            }
        }
    });

    String result_text = RESULT_TEXT_OK;
    if (c !== nil)
    {
        result_text = RESULT_TEXT_FAIL;
        msg = color_text(TEXT_COLOR_RED, c.throwed().str());
    }

    err_println("%-20s %s".(result_text, msg));
}

public void run_cases(Iter<Case> case_iter)
{
    foreach (var case: case_iter)
    {
        run_case(case);
    }
}
